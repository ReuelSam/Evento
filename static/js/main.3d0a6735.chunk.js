(this["webpackJsonpreact-front"]=this["webpackJsonpreact-front"]||[]).push([[0],{36:function(e,t,n){"use strict";n.r(t);var s=n(1),a=n.n(s),c=n(22),r=n.n(c),o=n(2),i=n(7),l=n(15),d=n(3),u=n(4),j=n(6),h=n(5),m=function(e){return fetch("".concat("http://35.154.206.235:8000","/post/").concat(e),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},b=function(e,t){return fetch("".concat("http://35.154.206.235:8000","/post/").concat(e),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},p=function(e,t,n){return fetch("".concat("http://35.154.206.235:8000","/post/like"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e,postId:n})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},f=function(e,t,n){return fetch("".concat("http://35.154.206.235:8000","/post/unlike"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e,postId:n})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},g=function(e,t,n){return fetch("".concat("http://35.154.206.235:8000","/post/notInteresed"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e,postId:n})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},x=function(e,t,n){return fetch("".concat("http://35.154.206.235:8000","/post/notInteresed/undo"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e,postId:n})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},O=function(e,t,n,s){return fetch("".concat("http://35.154.206.235:8000","/post/comment"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e,postId:n,comment:s})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},v=function(e,t,n,s){return fetch("".concat("http://35.154.206.235:8000","/post/uncomment"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e,postId:n,comment:s})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},N=n.p+"static/media/event.9994734f.jpg",y=function(e,t){"undefined"!==typeof window&&(localStorage.setItem("jwt",JSON.stringify(e)),t())},w=function(e){return"undefined"!==typeof window&&localStorage.removeItem("jwt"),e(),fetch("".concat("http://35.154.206.235:8000","/signout"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},k=function(){return"undefined"!=typeof window&&(!!localStorage.getItem("jwt")&&JSON.parse(localStorage.getItem("jwt")))},S=function(e){return console.log("email: ",e),fetch("".concat("http://35.154.206.235:8000","/forgot-password/"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({email:e})}).then((function(e){return console.log("forgot password response: ",e),e.json()})).catch((function(e){return console.log(e)}))},C=n(0),T=["Environmental","Social","Educational","Sport","Recreational","Music","Political","Festive"],P=["Recent","Oldest","Popular"],A=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).init=function(){console.log(e.state.loadAll,e.state.option,P[e.state.option]),e.setState({loading:!0,message:"".concat(P[e.state.option]," Events from ").concat(e.state.loadAll?"All Users":"Following")}),e.loadPosts(e.state.page)},e.loadPosts=function(t){(function(e,t,n,s){if(console.log(n),e){if(0===t)return fetch("".concat("http://35.154.206.235:8000","/posts/?page=").concat(s),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}));if(1===t)return fetch("".concat("http://35.154.206.235:8000","/posts/oldest/?page=").concat(s),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}));if(2===t)return fetch("".concat("http://35.154.206.235:8000","/posts/popular/?page=").concat(s),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}else{if(0===t)return fetch("".concat("http://35.154.206.235:8000","/posts/").concat(n,"/?page=").concat(s),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}));if(1===t)return fetch("".concat("http://35.154.206.235:8000","/posts/oldest/").concat(n,"/?page=").concat(s),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}));if(2===t)return fetch("".concat("http://35.154.206.235:8000","/posts/popular/").concat(n,"/?page=").concat(s),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}})(e.state.loadAll,e.state.option,k().user._id,t).then((function(t){t.error?console.log(t.error):e.setState({posts:t,loading:!1})}))},e.loadMore=function(t){e.setState({page:e.state.page+t,loading:!0}),e.loadPosts(e.state.page+t)},e.loadLess=function(t){e.setState({page:e.state.page-t,loading:!0}),e.loadPosts(e.state.page-t)},e.generateTags=function(e){return e.map((function(e,t){return!(e>=.5)||Object(C.jsxs)("label",{className:"btn btn-raised btn-info col-md-12 mr-1",children:[" ",T[t]," "]},t)}))},e.tagsList=function(t){return Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{className:"text-muted",children:"Event Tags"}),Object(C.jsx)("br",{}),Object(C.jsx)("div",{className:"button-group ml-5 mr-5",children:e.generateTags(t)})]})},e.checkLoadAll=function(){return function(t){e.setState({loadAll:t.target.checked})}},e.setOption=function(t){e.setState({option:t})},e.renderFilters=function(){return Object(C.jsx)("div",{children:Object(C.jsxs)("div",{className:"jumbotron",children:[Object(C.jsx)("h3",{className:"mb-2",children:"Filters"}),Object(C.jsxs)("center",{children:[Object(C.jsxs)("label",{className:"btn btn-primary ml-3",children:[Object(C.jsx)("input",{type:"checkbox",className:"form-check-input",onChange:e.checkLoadAll(),checked:e.state.loadAll}),"All Events"]}),Object(C.jsxs)("div",{className:"dropdown d-inline",children:[Object(C.jsx)("button",{className:"btn btn-secondary dropdown-toggle",type:"button",id:"dropdownMenuButton","data-toggle":"dropdown","aria-haspopup":"true","aria-expanded":"false",children:P[e.state.option]}),Object(C.jsxs)("div",{className:"dropdown-menu","aria-labelledby":"dropdownMenuButton",children:[Object(C.jsx)("button",{className:"btn",style:{width:"170px"},onClick:function(){return e.setOption(0)},children:"Recent"}),Object(C.jsx)("button",{className:"btn",style:{width:"170px"},onClick:function(){return e.setOption(1)},children:"Oldest"}),Object(C.jsx)("button",{className:"btn",style:{width:"170px"},onClick:function(){return e.setOption(2)},children:"Popular"})]})]}),Object(C.jsx)("button",{onClick:e.init,className:"btn btn-raised btn-primary mt-5 d-block",children:"Filter"})]})]})})},e.renderPosts=function(t){return Object(C.jsx)("div",{className:"row",children:t.map((function(t,n){var s=t.postedBy?"/user/".concat(t.postedBy._id):"",a=t.postedBy?t.postedBy.name:" Unknown";return Object(C.jsx)("div",{className:"card col-md-4 bg-light",children:Object(C.jsxs)("div",{className:"card-body",children:[Object(C.jsx)("img",{src:"".concat("http://35.154.206.235:8000","/post/photo/").concat(t._id,"?").concat((new Date).getTime()),alt:t.title,onError:function(e){return e.target.src="".concat(N)},className:"img-thumbnail mb-3 ",style:{height:"200px",width:"100%"}}),Object(C.jsx)("h5",{className:"card-title",style:{fontSize:"1.75em"},children:t.title}),Object(C.jsx)("p",{className:"card-text",style:{fontSize:"1.25em"},children:t.body.substring(0,100)}),Object(C.jsx)("br",{}),Object(C.jsxs)("p",{className:"font-italic mark",children:["Posted By: ",Object(C.jsxs)(o.b,{to:"".concat(s),children:[a," "]}),"on ",new Date(t.created).toDateString()]}),e.tagsList(t.tags),Object(C.jsx)(o.b,{to:"/post/".concat(t._id),className:"btn btn-raised btn-primary btn-sm",children:"Expand"})]})},n)}))})},e.state={posts:[null],loading:!0,loadAll:!1,option:0,message:"Recent Events from Following",page:1},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.loadPosts(this.state.page)}},{key:"render",value:function(){var e=this,t=this.state,n=t.posts,s=t.loading,a=t.page;return Object(C.jsxs)("div",{className:"container",children:[this.renderFilters(),Object(C.jsx)("h2",{className:"mt-5 mb-5",children:this.state.message}),Object(C.jsx)("h2",{className:"mt-5 mb-5",children:n.length?"":"No more posts"}),s?Object(C.jsxs)("div",{className:"jumbotron text-center",children:[Object(C.jsx)("h2",{children:"Loading..."})," "]}):this.renderPosts(n),a>1?Object(C.jsxs)("button",{className:"btn btn-raised btn-warning mr-5 mt-5 mb-5",onClick:function(){return e.loadLess(1)},children:["Previous (",this.state.page-1,")"]}):"",n.length?Object(C.jsxs)("button",{className:"btn btn-raised btn-primary mt-5 mb-5",onClick:function(){return e.loadMore(1)},children:["Next (",a+1,")"]}):""]})}}]),n}(s.Component),E=n.p+"static/media/Image1.bdefbaec.png",I=n.p+"static/media/Image2.71e776c2.png",F=n.p+"static/media/Image3.d2fd3f25.png",R=function(){var e=Object(l.useMediaQuery)({query:"(min-device-width: 700px)"});return Object(C.jsx)("div",{children:Object(C.jsxs)("div",{id:"carouselExampleIndicators",className:"carousel slide mb-5","data-ride":"carousel",children:[Object(C.jsxs)("ol",{className:"carousel-indicators",children:[Object(C.jsx)("li",{"data-target":"#carouselExampleIndicators","data-slide-to":"0",className:"active"}),Object(C.jsx)("li",{"data-target":"#carouselExampleIndicators","data-slide-to":"1"}),Object(C.jsx)("li",{"data-target":"#carouselExampleIndicators","data-slide-to":"2"})]}),Object(C.jsxs)("div",{className:"carousel-inner",children:[Object(C.jsxs)("div",{className:"carousel-item active",children:[Object(C.jsx)("img",{className:"d-block w-100",src:E,alt:"First slide"}),Object(C.jsxs)("div",{class:"carousel-caption ",children:[Object(C.jsx)("h3",{children:"What is Evento?"}),e?Object(C.jsx)("h5",{children:"Evento is a new and upcoming Social Network Platform that focuses solely on Event Management."}):Object(C.jsx)("p",{children:"Evento is a new and upcoming Social Network Platform that focuses solely on Event Management."})]})]}),Object(C.jsxs)("div",{className:"carousel-item",children:[Object(C.jsx)("img",{className:"d-block w-100",src:I,alt:"Second slide"}),Object(C.jsxs)("div",{class:"carousel-caption",children:[Object(C.jsx)("h3",{className:"text-dark",children:"Main Feature"}),e?Object(C.jsx)("h5",{className:"text-dark",children:"Evento allows for organizing and managing Events with utmost ease. We have a very easy to use Interface that allows for interaction and personalized user experience with our User Recommendation System."}):Object(C.jsx)("p",{className:"text-dark",children:"Evento allows for organizing and managing Events with utmost ease. We have a very easy to use Interface that allows for interaction and personalized user experience with our User Recommendation System."})]})]}),Object(C.jsx)("div",{className:"carousel-item",children:Object(C.jsxs)(o.b,{to:"/signup",children:[Object(C.jsx)("img",{className:"d-block w-100",src:F,alt:"Third slide"}),Object(C.jsxs)("div",{class:"carousel-caption ",children:[Object(C.jsx)("h3",{children:"Get Started"}),e?Object(C.jsx)("h5",{children:"Get Started with Evento and you can host and attend events in no time. Click the image to Register Now!"}):Object(C.jsx)("p",{children:"Get Started with Evento and you can host and attend events in no time. Click the image to Register Now!"})]})]})})]}),Object(C.jsxs)("a",{className:"carousel-control-prev",href:"#carouselExampleIndicators",role:"button","data-slide":"prev",children:[Object(C.jsx)("span",{className:"carousel-control-prev-icon","aria-hidden":"true"}),Object(C.jsx)("span",{className:"sr-only",children:"Previous"})]}),Object(C.jsxs)("a",{className:"carousel-control-next",href:"#carouselExampleIndicators",role:"button","data-slide":"next",children:[Object(C.jsx)("span",{className:"carousel-control-next-icon","aria-hidden":"true"}),Object(C.jsx)("span",{className:"sr-only",children:"Next"})]})]})})},z=function(){return Object(C.jsxs)("div",{style:{fontFamily:"-moz-initial",backgroundColor:"#dce1e3"},children:[Object(C.jsx)("div",{className:"jumbotron",style:{backgroundColor:"#2f7f80",color:"#ffffff",fontFamily:"-moz-initial",borderRadius:"0px"},children:Object(C.jsxs)("center",{children:[Object(C.jsx)("img",{style:{height:"125px",width:"auto"},className:"col-md-1",src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAXoAAAGQBAMAAABSUbZHAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAA9QTFRFAAAA////////AP//AAAAazhTtgAAAAV0Uk5TAP/4AQHJpSP/AAAED0lEQVR4nO3bbXbTSBhEYQs2kOwI9r8pPg4klqXutNRVqtc+9/6cGamfqWMgtsXtRkRERERE9Bwt7/3eCt4ZPXr06NFXOgM9+mp3Ro8ePfqw/m3kH9e48xVnoM+dgT53BvrcGehzZ6DPnYE+dwb63Bnoc2egz52B/vGaZo0zBB298/Z/C/3Z0KvPGA+9+ozx0KvPGA+9+ozx0KvPGA+9+ozx0KvPGA9941/VeWeIHj169OjRf6lvJNAP3hk9evTo0aNHjx49evTo0Wf0dUKfC30u9LnQ50KfC30u9LnQ50KfC30u9LnQ50KfC30u9LnQ50KfC30u9LnQ50Kf6/X1TxD6XOhzoc+FPhf6XOhzoc+FPhf6XC/7vha9J/S50OdCnwt9LvS50OdCnwt9LvS50OdCnwt9LvS50OdCnwt9LvS50OdCnwu9rm8H//ta+qNHldL/PvHYBaX0h8+qpP974KErKumPH1ZI/++8I5cU0p84rY7+47gD19TRdyRnrrlWf/cM3/hFZfSf+APnVdGvHp8cvqqK/h4/fmAR/frJ1eHLiujPTV9Ef3L6IvqT09fQr/DP9mft+nXzbD/nnJ6+gv789BX05/EF9Gd/t/xTXj8xfV4/M31ePzN9XD81fVw/NX1aPzd9Wj83fVg/OX1YPzl9Vj87vUO/HH9TfXYjg354xenpDfpl+ILp6Q364R1X+FPT6/XL6BUTb0o+kuuHlxRML9cvo5fM/5K96fXDHMHrRq4fvkYyvVo/DJJM79P3L9JML9YvoyTN9GL9qEk0vVY/jBJNb9y+c5lqeuPrvsNSTe/7PadznWx6259WPZhsettPCp0LddPL9d+/pummN/1837tSOL3pvVUHp3hTsj1L+b62p1vhJ6f3fKZw14/WTRXTWz7P6a0rxVs+S+sIlb9kbx59h6id3vM5ZtMont6jbyLF05s+Q24o1dOb9A2menrX5/e7Tvn0Lv0uVD697buTHal+ept+h6qf3ve91cZqmN6n32AN0xu/M3zQOqY36h+4jumd39e+t5tEb4/Q65dduHJ663fl9umt+tb4c+L7nPrG+MLHHqz6/fGnvOus+ttP7/TuJ1y807v129eOcnr700XW6e36x/Gl0/uf7HJO79drP7h8yK7/6hNxzb1t+vvxxdNf8USjb/or9EvnjMku0H+eMXmfzp2N+kV0n21X6P8fMnub5o29+sU0/UVPUZvwF+kXy+vmsifYPdNfpV8s01/2twcs06f/1sxk6HOhz4U+F/pc6HOhz4U+F/pc6HOhz4U+F/pc6HOhz4U+F/pc6HOhz4U+F/pc6HOhz4U+F/pc6HOhz4U+F/pc6HON6J8g9LnQ50KfC30u9LnQ50KfC32uV9MTERERERFF+wV3I/7fViHXpwAAAABJRU5ErkJggg==",alt:"Logo"}),Object(C.jsxs)("div",{style:{display:"inline"},children:[Object(C.jsx)("h1",{children:"Home Page"}),Object(C.jsx)("h3",{className:"lead ml-2",children:"Welcome to Evento"})]})]})}),k()?Object(C.jsx)("div",{className:"container",children:Object(C.jsx)(A,{})}):Object(C.jsx)("div",{className:"container",children:Object(C.jsx)(R,{})})]})},B=function(e,t){return e.location.pathname===t?{color:"#000000"}:{color:"#ffffff"}},_=Object(i.g)((function(e){var t=e.history;return Object(C.jsx)("div",{children:Object(C.jsxs)("ul",{className:"nav nav-tabs",style:{backgroundColor:"#116466"},children:[Object(C.jsx)("li",{className:"nav-item",children:Object(C.jsx)(o.b,{className:"nav-link",to:"/",style:B(t,"/"),children:Object(C.jsx)("i",{className:"fa fa-home fa-2x text-light",style:{padding:"10px",borderRadius:"50%"}})})}),Object(C.jsx)("li",{className:"nav-item",children:Object(C.jsx)(o.b,{className:"nav-link",to:"/users",style:B(t,"/users"),children:Object(C.jsx)("i",{className:"fa fa-users fa-2x text-light",style:{padding:"10px",borderRadius:"50%"}})})}),!k()&&Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("li",{className:"nav-item",children:Object(C.jsx)(o.b,{className:"nav-link",to:"/signin",style:B(t,"/signin"),children:Object(C.jsx)("i",{className:"fa fa-sign-in fa-2x text-light",style:{padding:"10px",borderRadius:"50%"}})})}),Object(C.jsx)("li",{className:"nav-item",children:Object(C.jsx)(o.b,{className:"nav-link",to:"/signup",style:B(t,"/signup"),children:Object(C.jsx)("i",{className:"fa fa-plus-circle fa-2x text-light",style:{padding:"10px",borderRadius:"50%"}})})})]}),k()&&Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("li",{className:"nav-item",children:Object(C.jsx)(o.b,{className:"nav-link",to:"/user/findpeople/".concat(k().user._id),style:B(t,"/user/findpeople/".concat(k().user._id)),children:Object(C.jsx)("i",{className:"fa fa-user-plus fa-2x text-light",style:{padding:"10px",borderRadius:"50%"}})})}),Object(C.jsx)("li",{className:"nav-item",children:Object(C.jsx)(o.b,{className:"nav-link",to:"/user/post/new/".concat(k().user._id),style:B(t,"/user/post/new/".concat(k().user._id)),children:Object(C.jsx)("i",{className:"fa fa-plus-square fa-2x text-light",style:{padding:"10px",borderRadius:"50%"}})})}),Object(C.jsx)("li",{className:"nav-item",children:Object(C.jsx)(o.b,{className:"nav-link",to:"/user/".concat(k().user._id),style:B(t,"/user/".concat(k().user._id)),children:Object(C.jsx)("i",{className:"fa fa-user fa-2x text-light",style:{padding:"10px",borderRadius:"50%"}})})}),Object(C.jsx)("li",{className:"nav-item",children:Object(C.jsx)("span",{className:"nav-link",style:(B(t,"/signin"),{cursor:"pointer",color:"#fff"}),onClick:function(){return w((function(){return t.push("/")}))},children:Object(C.jsx)("i",{className:"fa fa-power-off fa-2x text-light",style:{padding:"10px",borderRadius:"50%"}})})})]})]})})})),L=function(e,t){return e.location.pathname===t?{color:"#000000"}:{color:"#ffffff"}},D=Object(i.g)((function(e){var t=e.history;return Object(C.jsxs)("nav",{className:"navbar navbar-light",style:{backgroundColor:"#116466"},children:[Object(C.jsx)("a",{className:"lead text-light ml-2",href:"/",children:"Evento"}),Object(C.jsx)("button",{className:"navbar-toggler toggler-example",type:"button","data-toggle":"collapse","data-target":"#navbarSupportedContent1","aria-controls":"navbarSupportedContent1","aria-expanded":"false","aria-label":"Toggle navigation",children:Object(C.jsx)("span",{className:"dark-blue-text",children:Object(C.jsx)("i",{className:"fa fa-bars fa-1x text-light"})})}),Object(C.jsx)("div",{className:"collapse navbar-collapse",id:"navbarSupportedContent1",children:Object(C.jsxs)("ul",{className:"navbar-nav mr-auto",children:[Object(C.jsx)("li",{className:"nav-item",children:Object(C.jsx)(o.b,{className:"",to:"/",style:L(t,"/"),children:Object(C.jsx)("i",{className:"fa fa-home fa-2x text-light",style:{padding:"10px",borderRadius:"50%"},children:Object(C.jsxs)("label",{className:"lead text-light ml-2 mb-2",style:{fontSize:"0.75em"},children:["   ","Home"]})})})}),Object(C.jsx)("li",{className:"nav-item",children:Object(C.jsx)(o.b,{className:"",to:"/users",style:L(t,"/users"),children:Object(C.jsx)("i",{className:"fa fa-users fa-2x text-light",style:{padding:"10px",borderRadius:"50%"},children:Object(C.jsxs)("label",{className:"lead text-light ml-2 mb-2",style:{fontSize:"0.75em"},children:["   ","Users"]})})})}),!k()&&Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("li",{className:"nav-item",children:Object(C.jsx)(o.b,{className:"",to:"/signin",style:L(t,"/signin"),children:Object(C.jsx)("i",{className:"fa fa-sign-in fa-2x text-light",style:{padding:"10px",borderRadius:"50%"},children:Object(C.jsxs)("label",{className:"lead text-light ml-2 mb-2",style:{fontSize:"0.75em"},children:["   ","Sign In"]})})})}),Object(C.jsx)("li",{className:"nav-item",children:Object(C.jsx)(o.b,{className:"",to:"/signup",style:L(t,"/signup"),children:Object(C.jsx)("i",{className:"fa fa-plus-circle fa-2x text-light",style:{padding:"10px",borderRadius:"50%"},children:Object(C.jsxs)("label",{className:"lead text-light ml-2 mb-2",style:{fontSize:"0.75em"},children:["   ","Sign Up"]})})})})]}),k()&&Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("li",{className:"nav-item",children:Object(C.jsx)(o.b,{className:"",to:"/user/findpeople/".concat(k().user._id),style:L(t,"/user/findpeople/".concat(k().user._id)),children:Object(C.jsx)("i",{className:"fa fa-user-plus fa-2x text-light",style:{padding:"10px",borderRadius:"50%"},children:Object(C.jsxs)("label",{className:"lead text-light ml-2 mb-2",style:{fontSize:"0.75em"},children:["   "," Suggested Users"]})})})}),Object(C.jsx)("li",{className:"nav-item",children:Object(C.jsx)(o.b,{className:"",to:"/user/post/new/".concat(k().user._id),style:L(t,"/user/post/new/".concat(k().user._id)),children:Object(C.jsx)("i",{className:"fa fa-plus-square fa-2x text-light",style:{padding:"10px",borderRadius:"50%"},children:Object(C.jsxs)("label",{className:"lead text-light ml-2 mb-2",style:{fontSize:"0.75em"},children:["   ","Create Event"]})})})}),Object(C.jsx)("li",{className:"nav-item",children:Object(C.jsx)(o.b,{className:"",to:"/user/".concat(k().user._id),style:L(t,"/user/".concat(k().user._id)),children:Object(C.jsx)("i",{className:"fa fa-user fa-2x text-light",style:{padding:"10px",borderRadius:"50%"},children:Object(C.jsxs)("label",{className:"lead text-light ml-2 mb-2",style:{fontSize:"0.75em"},children:["   ","Profile"]})})})}),Object(C.jsx)("li",{className:"nav-item",children:Object(C.jsx)("span",{className:"",style:(L(t,"/signin"),{cursor:"pointer",color:"#fff"}),onClick:function(){return w((function(){return t.push("/")}))},children:Object(C.jsx)("i",{className:"fa fa-power-off fa-2x text-light",style:{padding:"10px",borderRadius:"50%"},children:Object(C.jsxs)("label",{className:"lead text-light ml-2 mb-2",style:{fontSize:"0.75em"},children:["   ","Sign Out"]})})})})]})]})})]})})),U=n(9),M=["Environmental","Social","Educational","Sport","Recreational","Music","Political","Festive"],J=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).handleChange=function(t){return function(n){e.setState({error:""}),e.setState({open:!1}),e.setState(Object(U.a)({},t,n.target.value))}},e.tagChecked=function(t){return function(n){e.setState({open:!1}),console.log(t+n.target.checked);var s=n.target.checked,a=M.indexOf(t),c=e.state.tags;c[a]=s?.75:0,e.setState({tags:c})}},e.clickSubmit=function(t){t.preventDefault();var n=e.state,s=n.name,a=n.email,c=n.password,r=n.repassword,o=e.state.tags;(o.map((function(e,t){return 0===e&&(o[t]=.25),null})),c===r)?function(e){return fetch("".concat("http://35.154.206.235:8000","/signup"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}({name:s,email:a,password:c,tags:o}).then((function(t){console.log(t),t.error?e.setState({error:t.error}):e.setState({error:"",name:"",email:"",password:"",repassword:"",tags:[0,0,0,0,0,0,0,0],open:!0})})):e.setState({error:"Entered Passwords do not match"})},e.createCheckbox=function(t){return Object(C.jsxs)("label",{className:"btn btn-primary",children:[Object(C.jsx)("input",{type:"checkbox",className:"form-check-input",onChange:e.tagChecked(t),checked:!!e.state.tags[M.indexOf(t)]}),t]},M.indexOf(t))},e.createCheckboxes=function(){return M.map(e.createCheckbox)},e.tagsForm=function(){return Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{className:"text-muted",children:"Interested Tags"}),Object(C.jsx)("br",{}),Object(C.jsx)("div",{className:"button-group ml-5 mr-5",children:e.createCheckboxes()})]})},e.signupForm=function(t,n,s,a){return Object(C.jsxs)("form",{children:[Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{className:"text-muted",children:"Name"}),Object(C.jsx)("input",{onChange:e.handleChange("name"),type:"text",className:"form-control",value:t})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{className:"text-muted",children:"Email"}),Object(C.jsx)("input",{onChange:e.handleChange("email"),type:"email",className:"form-control",value:n})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{className:"text-muted",children:"Password"}),Object(C.jsx)("input",{onChange:e.handleChange("password"),type:"password",className:"form-control",value:s})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{className:"text-muted",children:"Re-enter Password"}),Object(C.jsx)("input",{onChange:e.handleChange("repassword"),type:"password",className:"form-control",value:a})]}),e.tagsForm(),Object(C.jsx)("center",{children:Object(C.jsx)("button",{onClick:e.clickSubmit,className:"btn btn-raised btn-primary",children:"Submit"})})]})},e.state={name:"",email:"",password:"",repassword:"",tags:[0,0,0,0,0,0,0,0],error:""},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state,t=e.name,n=e.email,s=e.password,a=e.repassword,c=e.error,r=e.open;return Object(C.jsxs)("div",{className:"container mt-3",style:{backgroundColor:"#ffffff"},children:[Object(C.jsx)("br",{}),Object(C.jsx)("h2",{className:"",children:"Signup"}),Object(C.jsx)("div",{className:"alert alert-danger",style:{display:c?"":"none"},children:c}),Object(C.jsxs)("div",{className:"alert alert-info",style:{display:r?"":"none"},children:["New Account has been created successfully. Please proceed to ",Object(C.jsx)(o.b,{to:"/signin",children:"Sign In."})]}),this.signupForm(t,n,s,a),Object(C.jsx)("br",{})]})}}]),n}(s.Component),H=n(24),V=n.n(H),G=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).responseGoogle=function(t){console.log(t);var n=t.profileObj;(function(e){return fetch("".concat("http://35.154.206.235:8000","/social-login"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})({password:n.googleId,name:n.name,email:n.email,imageUrl:n.imageUrl}).then((function(t){console.log("signin data: ",t),t.error?console.log("Error Login. Please try again.."):(console.log("signin success - setting jwt: ",t),1===t.status?e.props.getTags(!0,t):2===t.status&&y(t,(function(){e.setState({redirectToReferrer:!0})})))}))},e.state={redirectToReferrer:!1},e}return Object(u.a)(n,[{key:"render",value:function(){return this.state.redirectToReferrer?Object(C.jsx)(i.a,{to:"/"}):Object(C.jsx)(V.a,{clientId:"679380407525-2cvoah9gpsjjffc5k1p6atahhf2vqfl4.apps.googleusercontent.com",buttonText:"Login with Google",onSuccess:this.responseGoogle,onFailure:this.responseGoogle})}}]),n}(s.Component),X=function(e,t){return fetch("".concat("http://35.154.206.235:8000","/user/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},q=function(e,t){return fetch("".concat("http://35.154.206.235:8000","/user/").concat(e),{method:"DELETE",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},K=function(e,t,n){return fetch("".concat("http://35.154.206.235:8000","/user/follow"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e,followId:n})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},Q=function(e,t,n){return fetch("".concat("http://35.154.206.235:8000","/user/unfollow"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e,unfollowId:n})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},W=function(e,t,n){return fetch("".concat("http://35.154.206.235:8000","/user/update/tags"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e,userTags:n})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},Y=function(e,t,n){return fetch("".concat("http://35.154.206.235:8000","/user/post/attend"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e,postId:n})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},Z=function(e,t,n){return fetch("".concat("http://35.154.206.235:8000","/user/post/unattend"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)},body:JSON.stringify({userId:e,postId:n})}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))},$=["Environmental","Social","Educational","Sport","Recreational","Music","Political","Festive"],ee=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).handleChange=function(t){return function(n){e.setState({error:""}),e.setState(Object(U.a)({},t,n.target.value))}},e.clickSubmit=function(t){t.preventDefault(),e.setState({loading:!0});var n=e.state;(function(e){return fetch("".concat("http://35.154.206.235:8000","/signin"),{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(e)}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})({email:n.email,password:n.password}).then((function(t){t.error?e.setState({error:t.error,loading:!1}):y(t,(function(){e.setState({redirectToReferer:!0})}))}))},e.showTags=function(t,n){e.setState({showTags:t,data:n})},e.createCheckbox=function(t){return Object(C.jsxs)("label",{className:"btn btn-primary",children:[Object(C.jsx)("input",{type:"checkbox",className:"form-check-input",onChange:e.tagChecked(t),checked:!!e.state.tags[$.indexOf(t)]}),t]},$.indexOf(t))},e.createCheckboxes=function(){return $.map(e.createCheckbox)},e.tagsForm=function(){return Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{className:"text-muted",children:"New User! Choose your interested Tags"}),Object(C.jsx)("br",{}),Object(C.jsx)("div",{className:"button-group ml-5 mr-5",children:e.createCheckboxes()}),Object(C.jsx)("button",{onClick:e.submitTags,className:"btn btn-raised btn-primary",children:"Submit Tags"})]})},e.submitTags=function(){var t=e.state.data,n=t.token,s=t.user._id,a=e.state.tags;a.map((function(e,t){return 0===e&&(a[t]=.25),null})),W(s,n,a).then((function(e){e.error&&console.log(e.error)})),y(t,(function(){e.setState({redirectToReferer:!0})}))},e.tagChecked=function(t){return function(n){e.setState({open:!1}),console.log(t+n.target.checked);var s=n.target.checked,a=$.indexOf(t),c=e.state.tags;c[a]=s?.75:0,e.setState({tags:c})}},e.signinForm=function(t,n){return Object(C.jsxs)("form",{children:[Object(C.jsxs)("div",{className:"form-group",style:{width:"40%",margin:"auto"},children:[Object(C.jsx)("label",{className:"text-muted",children:"Email"}),Object(C.jsx)("input",{onChange:e.handleChange("email"),type:"email",className:"form-control",value:t})]}),Object(C.jsxs)("div",{className:"form-group",style:{width:"40%",margin:"auto"},children:[Object(C.jsx)("label",{className:"text-muted",children:"Password"}),Object(C.jsx)("input",{onChange:e.handleChange("password"),type:"password",className:"form-control",value:n})]}),Object(C.jsx)("br",{}),Object(C.jsx)("center",{children:Object(C.jsx)("button",{onClick:e.clickSubmit,className:"btn btn-raised btn-primary d-inline",children:"Submit"})})]})},e.state={email:"",password:"",error:"",redirectToReferer:!1,loading:!1,showTags:!1,tags:[0,0,0,0,0,0,0,0]},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state,t=e.email,n=e.password,s=e.error,a=e.redirectToReferer,c=e.loading;return a?Object(C.jsx)(i.a,{to:"/"}):Object(C.jsxs)("div",{className:"container mt-3",style:{backgroundColor:"#ffffff"},children:[Object(C.jsx)("br",{}),Object(C.jsx)("h2",{className:"",children:"Sign In"}),Object(C.jsx)("hr",{}),Object(C.jsx)("br",{}),Object(C.jsx)("div",{className:"alert alert-danger",style:{display:s?"":"none"},children:s}),c?Object(C.jsxs)("div",{className:"jumbotron text-center",children:[Object(C.jsx)("h2",{children:"Loading..."})," "]}):"",!this.state.showTags&&this.signinForm(t,n),!this.state.showTags&&Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("center",{children:Object(C.jsx)("p",{children:Object(C.jsxs)(o.b,{to:"/forgot-password",className:"btn btn-raised btn-danger d-inline",children:[" ","Forgot Password"]})})}),Object(C.jsxs)("center",{children:[Object(C.jsx)("br",{}),Object(C.jsx)("h4",{className:"text-muted",children:" OR "}),Object(C.jsx)("br",{}),Object(C.jsx)(G,{getTags:this.showTags})]})]}),this.state.showTags&&this.tagsForm(),Object(C.jsx)("br",{}),Object(C.jsx)("br",{}),Object(C.jsx)("br",{})]})}}]),n}(s.Component),te=n.p+"static/media/avatar.cea2a1dd.png",ne=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(d.a)(this,n);for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={redirect:!1},e.deleteAccount=function(){console.log("Delete Account");var t=k().token,n=e.props.userId;q(n,t).then((function(t){t.error?console.log(t.error):(w((function(){return console.log("User is deleted")})),e.setState({redirect:!0}))}))},e.deleteConfirmed=function(){window.confirm("Are you sure you wish to delete your account? This will delete all your details from our database.")&&e.deleteAccount()},e}return Object(u.a)(n,[{key:"render",value:function(){return this.state.redirect?Object(C.jsx)(i.a,{to:"/"}):Object(C.jsx)("button",{onClick:this.deleteConfirmed,className:"btn btn-raised btn-danger",children:"Delete Profile"})}}]),n}(s.Component),se=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(d.a)(this,n);for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).followClick=function(){e.props.onButtonClick(K)},e.unfollowClick=function(){e.props.onButtonClick(Q)},e}return Object(u.a)(n,[{key:"render",value:function(){return Object(C.jsx)("div",{children:Object(C.jsx)("div",{className:"d-inline-block",children:this.props.following?Object(C.jsx)("button",{className:"btn btn-warning btn-raised",onClick:this.unfollowClick,children:"Unfollow"}):Object(C.jsx)("button",{className:"btn btn-success btn-raised mr-5",onClick:this.followClick,children:"Follow"})})})}}]),n}(s.Component),ae=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.following,n=e.followers,s=e.posts,a=e.name;return Object(C.jsx)("div",{children:Object(C.jsxs)("div",{className:"row",children:[Object(C.jsxs)("div",{className:"col-md-4",children:[Object(C.jsxs)("h3",{className:"text-primary",children:["Followers (",n.length,")"]}),Object(C.jsx)("hr",{}),n.map((function(e,t){return Object(C.jsx)("div",{children:Object(C.jsx)("div",{children:Object(C.jsxs)(o.b,{to:"/user/".concat(e._id),children:[Object(C.jsx)("img",{className:"float-left mr-2",style:{height:"30px",width:"30px",borderRadius:"50%"},src:"".concat("http://35.154.206.235:8000","/user/photo/").concat(e._id),alt:e.name,onError:function(e){return e.target.src="".concat(te)}}),Object(C.jsx)("div",{children:Object(C.jsx)("p",{className:"lead",children:e.name})})]})})},t)}))]}),Object(C.jsxs)("div",{className:"col-md-4",children:[Object(C.jsxs)("h3",{className:"text-primary",children:["Following (",t.length,")"]}),Object(C.jsx)("hr",{}),t.map((function(e,t){return Object(C.jsx)("div",{children:Object(C.jsx)("div",{children:Object(C.jsxs)(o.b,{to:"/user/".concat(e._id),children:[Object(C.jsx)("img",{className:"float-left mr-2",style:{height:"30px",width:"30px",borderRadius:"50%"},src:"".concat("http://35.154.206.235:8000","/user/photo/").concat(e._id),alt:e.name,onError:function(e){return e.target.src="".concat(te)}}),Object(C.jsx)("div",{children:Object(C.jsx)("p",{className:"lead",children:e.name})})]})})},t)}))]}),Object(C.jsxs)("div",{className:"col-md-4",children:[Object(C.jsxs)("h3",{className:"text-primary",children:[a,"'s Events  (",s.length,")"]}),Object(C.jsx)("hr",{}),s.map((function(e,t){return Object(C.jsx)("div",{children:Object(C.jsx)("div",{children:Object(C.jsx)(o.b,{to:"/post/".concat(e._id),children:Object(C.jsx)("div",{children:Object(C.jsx)("p",{className:"lead",children:e.title})})})})},t)}))]})]})})}}]),n}(s.Component),ce=["Environmental","Social","Educational","Sport","Recreational","Music","Political","Festive"],re=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).checkFollow=function(e){var t=k();return e.followers.find((function(e){return e._id===t.user._id}))},e.clickFollowButton=function(t){t(k().user._id,k().token,e.state.user._id).then((function(t){t.error?e.setState({error:t.error}):e.setState({user:t,following:!e.state.following})}))},e.init=function(t){var n=k().token;X(t,n).then((function(t){if(t.error)e.setState({redirectToSignin:!0});else{var n=e.checkFollow(t);e.setState({user:t,load:!0,following:n}),e.loadPosts(t._id)}}))},e.loadPosts=function(t){(function(e,t){return fetch("".concat("http://35.154.206.235:8000","/posts/by/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(t,k().token).then((function(t){t.error?console.log(t.error):e.setState({posts:t})}))},e.generateTags=function(e){return e.map((function(e,t){return!(e>=.5)||Object(C.jsxs)("label",{className:"btn btn-raised btn-info col-md-3 mr-2",children:[" ",ce[t]," "]},t)}))},e.tagsList=function(t){return Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{className:"text-muted",children:"Interested Tags:"}),Object(C.jsx)("br",{}),Object(C.jsx)("div",{className:"button-group",children:e.generateTags(t)})]})},e.state={user:{following:[],followers:[]},redirectToSignin:!1,load:!1,following:!0,posts:[]},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params.userId;this.init(e)}},{key:"componentWillReceiveProps",value:function(e){var t=e.match.params.userId;this.init(t)}},{key:"render",value:function(){var e=this.state,t=e.redirectToSignin,n=e.user,s=e.posts;if(t)return Object(C.jsx)(i.a,{to:"/signin"});var a=n._id?"".concat("http://35.154.206.235:8000","/user/photo/").concat(n._id,"?").concat((new Date).getTime()):te;return Object(C.jsxs)("div",{className:"container",children:[Object(C.jsxs)("h2",{className:"mt-5 mb-5",children:["Profile: ",n.name]}),Object(C.jsxs)("div",{className:"row",children:[Object(C.jsx)("div",{className:"col-md-4",children:Object(C.jsx)("img",{style:{height:"300px",width:"auto"},className:"img-thumbnail",src:a,onError:function(e){return e.target.src="".concat(te)},alt:n.name})}),Object(C.jsxs)("div",{className:"col-md-8",children:[Object(C.jsxs)("div",{className:"lead mt-5",children:[Object(C.jsxs)("p",{children:["Email: ",n.email]}),Object(C.jsx)("p",{children:"Joined on: ".concat(new Date(n.created).toDateString())}),this.state.load&&this.tagsList(n.tags)]}),k().user&&k().user._id===n._id?Object(C.jsxs)("div",{className:"d-block",children:[Object(C.jsx)(o.b,{className:"btn btn-raised btn-light bg-dark mr-2",to:"/user/attending/".concat(n._id),children:"Upcoming Events"}),Object(C.jsx)(o.b,{className:"btn btn-raised btn-primary mr-2",to:"/user/post/new/".concat(n._id),children:"Create Event"}),Object(C.jsx)(o.b,{className:"btn btn-raised btn-success mr-2",to:"/user/edit/".concat(n._id),children:"Edit Profile"}),Object(C.jsx)(ne,{userId:n._id})]}):Object(C.jsx)(se,{following:this.state.following,onButtonClick:this.clickFollowButton})]})]}),Object(C.jsx)("div",{className:"row",children:Object(C.jsxs)("div",{className:"col md-12 mt-5 mb-5",children:[Object(C.jsx)("hr",{}),Object(C.jsx)("p",{className:"lead",children:n.about}),Object(C.jsx)("hr",{}),Object(C.jsx)(ae,{followers:n.followers,following:n.following,posts:s,name:n.name})]})})]})}}]),n}(s.Component),oe=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).renderUsers=function(e){return Object(C.jsx)("div",{className:"row",children:e.map((function(e,t){return Object(C.jsx)("div",{className:"card col-md-4 mt-3",children:Object(C.jsxs)("div",{className:"card-body",children:[Object(C.jsx)("img",{style:{height:"300px",width:"100%"},className:"img-thumbnail",src:"".concat("http://35.154.206.235:8000","/user/photo/").concat(e._id),onError:function(e){return e.target.src="".concat(te)},alt:e.name}),Object(C.jsx)("h5",{className:"card-title",children:e.name}),Object(C.jsx)("p",{className:"card-text",children:e.email}),Object(C.jsx)(o.b,{to:"/user/".concat(e._id),className:"btn btn-raised btn-primary btn-sm",children:"View Profile"})]})},t)}))})},e.state={users:[],loading:!0},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;fetch("".concat("http://35.154.206.235:8000","/users"),{method:"GET"}).then((function(e){return e.json()})).catch((function(e){return console.log(e)})).then((function(t){t.error?console.log(t.error):e.setState({users:t,loading:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.users,n=e.loading;return Object(C.jsxs)("div",{className:"container",children:[Object(C.jsx)("h2",{className:"mt-5 mb-5",children:"All Users"}),n?Object(C.jsxs)("div",{className:"jumbotron text-center",children:[Object(C.jsx)("h2",{children:"Loading..."})," "]}):"",this.renderUsers(t)]})}}]),n}(s.Component),ie=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).init=function(t){var n=k().token;X(t,n).then((function(t){t.error?e.setState({redirectToProfile:!0}):e.setState({id:t._id,name:t.name,email:t.email,error:"",about:t.about})}))},e.handleChange=function(t){return function(n){var s,a="photo"===t?n.target.files[0]:n.target.value;if(void 0!==a){"photo"===t&&e.setState({defaultImage:!1,imagePath:URL.createObjectURL(n.target.files[0])});var c="photo"===t?n.target.files[0].size:0;e.userData.set(t,a),e.setState((s={},Object(U.a)(s,t,a),Object(U.a)(s,"fileSize",c),Object(U.a)(s,"error",""),s))}else e.setState({defaultImage:!0})}},e.isValid=function(){var t=e.state,n=t.name,s=t.email,a=t.password,c=t.repassword;return t.fileSize>25e4?(e.setState({error:"File size should be less 200KB"}),!1):0===n.length?(e.setState({error:"Name is required."}),!1):/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(s)?a.length>=1&&a.length<=7?(e.setState({error:"Password must be atleast 8 characters in length."}),!1):a===c||(e.setState({error:"Entered passwords do not match."}),!1):(e.setState({error:"Valid Email is required."}),!1)},e.clickSubmit=function(t){(t.preventDefault(),e.isValid())&&(e.setState({loading:!0}),function(e,t,n){return fetch("".concat("http://35.154.206.235:8000","/user/").concat(e),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)},body:n}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(e.props.match.params.userId,k().token,e.userData).then((function(t){t.error?e.setState({error:t.error}):function(e,t){if("undefined"!==typeof window&&localStorage.getItem("jwt")){var n=JSON.parse(localStorage.getItem("jwt"));n.user=e,localStorage.setItem("jwt",JSON.stringify(n)),t()}}(t,(function(){e.setState({redirectToProfile:!0})}))})))},e.signupForm=function(t,n,s,a,c){return Object(C.jsxs)("form",{children:[Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{className:"text-muted",children:"Profile Picture"}),Object(C.jsx)("input",{onChange:e.handleChange("photo"),type:"file",className:"form-control",accept:"image/*"})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{className:"text-muted",children:"Name"}),Object(C.jsx)("input",{onChange:e.handleChange("name"),type:"text",className:"form-control",value:t})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{className:"text-muted",children:"Email"}),Object(C.jsx)("label",{type:"email",className:"form-control font-italic",value:n,children:n})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{className:"text-muted",children:"About"}),Object(C.jsx)("textarea",{onChange:e.handleChange("about"),type:"text",className:"form-control",value:s})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{className:"text-muted",children:"New Password"}),Object(C.jsx)("br",{}),Object(C.jsx)("label",{className:"text-muted",style:{fontSize:"0.75em"},children:"(Leave empty if you do not wish to update password)"}),Object(C.jsx)("input",{onChange:e.handleChange("password"),type:"password",className:"form-control mb-3",value:a}),a&&Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)("label",{className:"text-muted",children:"Re-Enter Password"}),Object(C.jsx)("input",{onChange:e.handleChange("repassword"),type:"password",className:"form-control",value:c})]})]}),Object(C.jsx)("button",{onClick:e.clickSubmit,className:"btn btn-raised btn-primary",children:"Update"})]})},e.state={id:"",name:"",email:"",about:"",password:"",repassword:"",redirectToProfile:!1,error:"",fileSize:0,loading:!1,defaultImage:!0,imagePath:""},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.userData=new FormData;var e=this.props.match.params.userId;this.init(e)}},{key:"render",value:function(){var e=this.state,t=e.id,n=e.name,s=e.email,a=e.password,c=e.repassword,r=e.redirectToProfile,o=e.error,l=e.loading,d=e.about,u=e.defaultImage,j=e.imagePath;if(r)return Object(C.jsx)(i.a,{to:"/user/".concat(t)});var h=t?"".concat("http://35.154.206.235:8000","/user/photo/").concat(t,"?").concat((new Date).getTime()):te;return Object(C.jsxs)("div",{className:"container",children:[Object(C.jsx)("h2",{className:"mt-5 mb-5",children:"Edit Profile"}),Object(C.jsx)("div",{className:"alert alert-danger",style:{display:o?"":"none"},children:o}),l?Object(C.jsxs)("div",{className:"jumbotron text-center",children:[Object(C.jsx)("h2",{children:"Loading..."})," "]}):"",u?Object(C.jsxs)("figure",{className:"figure",children:[Object(C.jsx)("img",{style:{height:"200px",width:"auto"},className:"figure-img img-fluid rounded",src:h,alt:n,onError:function(e){return e.target.src="".concat(te)}}),Object(C.jsx)("figcaption",{className:"figure-caption",children:"Existing Event Image"})]}):Object(C.jsxs)("figure",{className:"figure",children:[Object(C.jsx)("img",{style:{height:"200px",width:"auto"},className:"figure-img img-fluid rounded",src:j,alt:n}),Object(C.jsx)("figcaption",{className:"figure-caption",children:"Image to be uploaded"})]}),"admin"===k().user.role||k().user._id===t&&this.signupForm(n,s,d,a,c)]})}}]),n}(s.Component),le=n(16),de=n(25),ue=function(e){var t=e.component,n=Object(de.a)(e,["component"]);return Object(C.jsx)(i.b,Object(le.a)(Object(le.a)({},n),{},{render:function(e){return k()?Object(C.jsx)(t,Object(le.a)({},e)):Object(C.jsx)(i.a,{to:{pathname:"/signin",state:{from:e.location}}})}}))},je=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).clickFollow=function(t,n){var s=k().user._id,a=k().token;K(s,a,t._id).then((function(s){if(s.error)e.setState({error:s.error});else{var a=e.state.users;a.splice(n,1),e.setState({users:a,open:!0,followMessage:"Following ".concat(t.name),error:""})}}))},e.renderUsers=function(t){return Object(C.jsx)("div",{className:"row",children:t.map((function(t,n){return Object(C.jsx)("div",{className:"card col-md-4 mt-3",children:Object(C.jsxs)("div",{className:"card-body",children:[Object(C.jsx)("img",{style:{height:"300px",width:"100%"},className:"img-thumbnail",src:"".concat("http://35.154.206.235:8000","/user/photo/").concat(t._id),onError:function(e){return e.target.src="".concat(te)},alt:t.name}),Object(C.jsx)("h5",{className:"card-title",children:t.name}),Object(C.jsx)("p",{className:"card-text",children:t.email}),Object(C.jsx)(o.b,{to:"/user/".concat(t._id),className:"btn btn-raised btn-primary btn-sm",children:"View Profile"}),Object(C.jsx)("button",{onClick:function(){return e.clickFollow(t,n)},className:"btn btn-raised btn-info float-right btn-sm",children:"Follow"})]})},n)}))})},e.state={users:[],open:!1,error:"",followMessage:"",loading:!0},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;(function(e,t){return fetch("".concat("http://35.154.206.235:8000","/user/findpeople/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(k().user._id,k().token).then((function(t){t.error?console.log(t.error):(console.log("Data: ",t),e.setState({users:t,loading:!1}))}))}},{key:"render",value:function(){var e=this.state,t=e.users,n=e.open,s=e.followMessage,a=e.loading;return Object(C.jsxs)("div",{className:"container",children:[Object(C.jsx)("h2",{className:"mt-5 mb-5",children:"Suggested Users"}),a?Object(C.jsxs)("div",{className:"jumbotron text-center",children:[Object(C.jsx)("h2",{children:"Loading..."})," "]}):"",n&&Object(C.jsx)("div",{className:"alert alert-success",children:Object(C.jsx)("p",{children:s})}),this.renderUsers(t)]})}}]),n}(s.Component),he=["Environmental","Social","Educational","Sport","Recreational","Music","Political","Festive"],me=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).handleChange=function(t){return function(n){var s,a="photo"===t?n.target.files[0]:n.target.value;if(void 0!==a){"photo"===t&&e.setState({defaultImage:!1,imagePath:URL.createObjectURL(n.target.files[0])});var c="photo"===t?n.target.files[0].size:0;e.postData.set(t,a),e.setState((s={},Object(U.a)(s,t,a),Object(U.a)(s,"fileSize",c),Object(U.a)(s,"error",""),s))}else e.setState({defaultImage:!0})}},e.tagChecked=function(t){return function(n){e.setState({tagCheck:!0,open:!1});var s=n.target.checked,a=he.indexOf(t),c=e.state.tags;c[a]=s?1:0,e.setState({tags:c}),e.postData.set("tags",c)}},e.isValid=function(){var t=e.state,n=t.title,s=t.body;return t.fileSize>2e5?(e.setState({error:"File size should be less 200KB"}),!1):0!==n.length&&0!==s.length||(e.setState({error:"Title and Body is required."}),!1)},e.clickSubmit=function(t){(t.preventDefault(),e.state.tagCheck&&e.isValid())?(e.setState({loading:!0}),function(e,t,n){return console.log(n),fetch("".concat("http://35.154.206.235:8000","/post/new/").concat(e),{method:"POST",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)},body:n}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(k().user._id,k().token,e.postData).then((function(t){t.error?e.setState({error:t.error}):e.setState({loading:!1,title:"",body:"",photo:"",tags:[0,0,0,0,0,0,0,0],redirectToProfile:!0})}))):e.setState({open:!0})},e.createCheckbox=function(t){return Object(C.jsxs)("label",{className:"btn btn-primary",children:[Object(C.jsx)("input",{type:"checkbox",className:"form-check-input",onChange:e.tagChecked(t),checked:!!e.state.tags[he.indexOf(t)]}),t]},he.indexOf(t))},e.createCheckboxes=function(){return he.map(e.createCheckbox)},e.tagsForm=function(){return Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{className:"text-muted",children:"Event Tags"}),Object(C.jsx)("br",{}),Object(C.jsx)("div",{className:"button-group ml-5 mr-5",children:e.createCheckboxes()})]})},e.newPostForm=function(t,n,s,a){return Object(C.jsxs)("form",{children:[Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{className:"text-muted",children:"Image"}),Object(C.jsx)("input",{onChange:e.handleChange("photo"),type:"file",className:"form-control",accept:"image/*"})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{className:"text-muted",children:"Title"}),Object(C.jsx)("input",{onChange:e.handleChange("title"),type:"text",className:"form-control",value:t})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{className:"text-muted",children:"Description"}),Object(C.jsx)("textarea",{onChange:e.handleChange("body"),type:"text",className:"form-control",value:n})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{className:"text-muted",children:"Venue"}),Object(C.jsx)("input",{onChange:e.handleChange("venue"),type:"text",className:"form-control",value:s})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{className:"text-muted",children:"Date and Time"}),Object(C.jsx)("input",{onChange:e.handleChange("dateAndTime"),type:"text",className:"form-control",value:a})]}),e.tagsForm(),Object(C.jsx)("button",{onClick:e.clickSubmit,className:"btn btn-raised btn-primary",children:"Create Post"})]})},e.state={title:"",body:"",photo:"",venue:"",dateAndTime:"",error:"",fileSize:0,loading:!1,redirectToProfile:!1,tagCheck:!1,open:!1,tags:[0,0,0,0,0,0,0,0],defaultImage:!0,imagePath:"",user:{}},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.postData=new FormData,this.setState({user:k().user})}},{key:"render",value:function(){var e=this.state,t=e.title,n=e.body,s=e.venue,a=e.dateAndTime,c=e.user,r=e.loading,o=e.error,l=e.redirectToProfile,d=e.open,u=e.defaultImage,j=e.imagePath;return l?Object(C.jsx)(i.a,{to:"/user/".concat(c._id)}):Object(C.jsxs)("div",{className:"container",children:[Object(C.jsx)("h2",{className:"mt-5 mb-5",children:"Create New Event"}),Object(C.jsx)("div",{className:"alert alert-danger",style:{display:o?"":"none"},children:o}),Object(C.jsx)("div",{className:"alert alert-danger",style:{display:d?"":"none"},children:"Please Choose tags related to your Event"}),r?Object(C.jsxs)("div",{className:"jumbotron text-center",children:[Object(C.jsx)("h2",{children:"Loading..."})," "]}):"",u?Object(C.jsxs)("figure",{className:"figure",children:[Object(C.jsx)("img",{style:{height:"200px",width:"auto"},className:"figure-img img-fluid rounded",src:N,alt:t}),Object(C.jsx)("figcaption",{className:"figure-caption",children:"Default Image for an Event"})]}):Object(C.jsxs)("figure",{className:"figure",children:[Object(C.jsx)("img",{style:{height:"200px",width:"auto"},className:"figure-img img-fluid rounded",src:j,alt:t}),Object(C.jsx)("figcaption",{className:"figure-caption",children:"Image to be uploaded"})]}),this.newPostForm(t,n,s,a)]})}}]),n}(s.Component),be=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(d.a)(this,n);for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={text:"",error:""},e.handleChange=function(t){e.setState({text:t.target.value,error:""})},e.isValid=function(){var t=e.state.text;return t.length>0?!(t.length>150)||(e.setState({error:"Comment max length is 150 characters"}),!1):(e.setState({error:"Comment should not be empty."}),!1)},e.addComment=function(t){if(t.preventDefault(),!k())return e.setState({error:"Please Sign in to leave a comment"}),!1;if(e.isValid()){var n=k().token,s=k().user._id,a=e.props.postId,c={text:e.state.text};O(s,n,a,c).then((function(t){t.error?console.log(t.error):(e.setState({text:""}),e.props.updateComments(t.comments))}))}},e.deleteComment=function(t){var n=k().token,s=k().user._id,a=e.props.postId;v(s,n,a,t).then((function(t){t.error?console.log(t.error):e.props.updateComments(t.comments)}))},e.deleteConfirmed=function(t){window.confirm("Are you sure you wish to delete your comment?")&&e.deleteComment(t)},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this,t=this.props.comments;t.reverse();var n=this.state.error;return Object(C.jsxs)("div",{className:"jumbotron",children:[Object(C.jsx)("div",{className:"alert alert-danger",style:{display:n?"":"none"},children:n}),Object(C.jsxs)("div",{className:"col-md-12",children:[Object(C.jsxs)("h3",{className:"text-primary",children:[" ",t.length," Comments ",Object(C.jsx)("i",{className:"fa fa-comment mb-2"})]}),Object(C.jsx)("hr",{}),Object(C.jsx)("form",{onSubmit:this.addComment,children:Object(C.jsxs)("div",{className:"form-group mt-4",children:[Object(C.jsx)("input",{type:"text",onChange:this.handleChange,className:"form-control",value:this.state.text,placeholder:"Leave a Comment..."}),Object(C.jsx)("button",{className:"btn btn-raised btn-success mt-2",children:"Post"})]})}),t.map((function(t,n){var s=t.postedBy?"/user/".concat(t.postedBy._id):"",a=t.postedBy?t.postedBy.name:" Unknown",c=t.postedBy?"".concat(t.postedBy._id):"";return Object(C.jsx)("div",{children:Object(C.jsxs)("div",{children:[Object(C.jsx)(o.b,{to:"/user/".concat(s),children:Object(C.jsx)("img",{className:"float-left mr-2",style:{height:"30px",width:"auto",borderRadius:"50%"},src:"".concat("http://35.154.206.235:8000","/user/photo/").concat(c),alt:a,onError:function(e){return e.target.src="".concat(te)}})}),Object(C.jsxs)("div",{children:[Object(C.jsx)("p",{className:"lead",children:t.text}),Object(C.jsxs)("p",{className:"font-italic mark bg-light",children:["Posted By: ",Object(C.jsxs)(o.b,{to:"/user/".concat(s),children:[a," "]}),"on ",new Date(t.created).toDateString(),console.log(k().user._id," ",c),";",Object(C.jsx)("span",{children:k().user&&k().user._id===c&&Object(C.jsx)(C.Fragment,{children:Object(C.jsx)("span",{onClick:function(){return e.deleteConfirmed(t)},className:"text-danger float-right mr-1",style:{cursor:"pointer"},children:"Remove"})})})]}),Object(C.jsx)("hr",{})]})]})},n)}))]})]})}}]),n}(s.Component),pe=["Environmental","Social","Educational","Sport","Recreational","Music","Political","Festive"],fe=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(d.a)(this,n);for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={post:"",tags:[],redirectToHome:!1,redirectToSignin:!1,like:!1,likes:0,notInterested:!1,userTags:[],comments:[]},e.checkLike=function(e){var t=k()&&k().user._id;return-1!==e.indexOf(t)},e.init=function(){var t=k().token,n=k()&&k().user._id;X(n,t).then((function(t){t.error?e.setState({redirectToProfile:!0}):e.setState({userTags:t.tags})}))},e.componentDidMount=function(){e.init();var t=e.props.match.params.postId;m(t).then((function(t){t.error?console.log(t.error):e.setState({post:t,tags:t.tags,likes:t.likes.length,like:e.checkLike(t.likes),notInterested:e.checkLike(t.notInterested),comments:t.comments})}))},e.updateTags=function(t){var n=e.state,s=n.tags,a=n.userTags,c=k().token,r=k().user._id;s.map((function(e,n){var c=.05*s[n];return t?a[n]+=c:a[n]-=c,!0})),W(r,c,a).then((function(e){e.error&&console.log(e.error)}))},e.updateComments=function(t){e.setState({comments:t})},e.likeToggle=function(){if(!k())return e.setState({redirectToSignin:!0}),!1;console.log("like toggled");var t=e.state.like?f:p,n=e.state.like?Z:Y,s=e.state.post._id,a=k().token,c=k().user._id;t(c,a,s).then((function(t){t.error?console.log(t.error):(console.log("like done"),e.setState({like:!e.state.like,likes:t.likes.length}),e.state.like&&e.state.notInterested&&e.notInterestedToggle(),e.updateTags(e.state.like))})),n(c,a,s).then((function(e){e.error&&console.log(e.error)}))},e.notInterestedToggle=function(){if(!k())return e.setState({redirectToSignin:!0}),!1;console.log("notInterested toggled");var t=e.state.notInterested?x:g,n=e.state.post._id,s=k().token;t(k().user._id,s,n).then((function(t){t.error?console.log(t.error):(console.log("not interested done"),e.setState({notInterested:!e.state.notInterested}),e.state.notInterested&&e.state.like&&e.likeToggle(),e.updateTags(!e.state.notInterested))}))},e.generateTags=function(e){return e.map((function(e,t){return!(e>=.5)||Object(C.jsxs)("label",{className:"btn btn-raised btn-info col-md-2 mr-2",children:[" ",pe[t]," "]},t)}))},e.tagsList=function(t){return Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{className:"text-muted",children:"Event Tags:"}),Object(C.jsx)("br",{}),Object(C.jsx)("div",{className:"button-group",children:e.generateTags(t)})]})},e.deletePost=function(){var t=e.props.match.params.postId,n=k().token;b(t,n).then((function(t){t.error?console.log(t.error):e.setState({redirectToHome:!0})}))},e.deleteConfirmed=function(){window.confirm("Are you sure you wish to delete your event? This will delete all details regarding your event from our database.")&&e.deletePost()},e.renderPost=function(t){var n=t.postedBy?"/user/".concat(t.postedBy._id):"",s=t.postedBy?t.postedBy.name:" Unknown",a=e.state,c=a.like,r=a.likes,i=a.notInterested;return Object(C.jsxs)("div",{className:"card-body",children:[Object(C.jsx)("img",{src:"".concat("http://35.154.206.235:8000","/post/photo/").concat(t._id,"?").concat((new Date).getTime()),alt:t.title,onError:function(e){return e.target.src="".concat(N)},className:"img-thumbnail mb-3",style:{height:"400px",width:"100%",objectFit:"cover"}}),k().user._id!==t.postedBy._id&&(c?Object(C.jsx)("h4",{className:"d-inline mr-1",children:Object(C.jsx)("i",{onClick:e.likeToggle,className:"fa fa-thumbs-up text-success bg-dark",style:{padding:"10px",borderRadius:"50%"}})}):Object(C.jsx)("h4",{className:"d-inline mr-1",children:Object(C.jsx)("i",{onClick:e.likeToggle,className:"fa fa-thumbs-up text-light bg-dark",style:{padding:"10px",borderRadius:"50%"}})})),k().user._id!==t.postedBy._id&&(i?Object(C.jsx)("h4",{className:"d-inline",children:Object(C.jsx)("i",{onClick:e.notInterestedToggle,className:"fa fa-thumbs-down text-warning bg-dark m3-3",style:{padding:"10px",borderRadius:"50%"}})}):Object(C.jsx)("h4",{className:"d-inline",children:Object(C.jsx)("i",{onClick:e.notInterestedToggle,className:"fa fa-thumbs-down text-light bg-dark mr-3",style:{padding:"10px",borderRadius:"50%"}})})),Object(C.jsxs)("h4",{className:"d-inline",children:[" ",r," Attending"]}),Object(C.jsx)("p",{className:"card-text mt-3",children:t.body}),Object(C.jsxs)("p",{className:"card-text",children:[Object(C.jsx)("strong",{children:"Venue:"})," ",t.venue]}),Object(C.jsxs)("p",{className:"card-text",children:[Object(C.jsx)("strong",{children:"Date and Time:"})," ",t.dateAndTime]}),Object(C.jsx)("br",{}),Object(C.jsxs)("p",{className:"font-italic mark",children:["Posted By: ",Object(C.jsxs)(o.b,{to:"".concat(n),children:[s," "]}),"on ",new Date(t.created).toDateString()]}),e.tagsList(e.state.tags),Object(C.jsxs)("div",{className:"d-inline-block",children:[Object(C.jsx)(o.b,{to:"/",className:"btn btn-raised btn-primary btn-sm mr-5",children:"Back to Events"}),k().user&&k().user._id===t.postedBy._id&&Object(C.jsxs)(C.Fragment,{children:[Object(C.jsx)(o.b,{to:"/post/edit/".concat(t._id),className:"btn btn-raised btn-warning btn-sm mr-5",children:"Update Event"}),Object(C.jsx)("button",{onClick:e.deleteConfirmed,className:"btn btn-raised btn-danger btn-sm",children:"Delete Event"})]})]})]})},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this.state,t=e.post,n=e.redirectToHome,s=e.redirectToSignin,a=e.comments;return n?Object(C.jsx)(i.a,{to:"/"}):s?Object(C.jsx)(i.a,{to:"/signin"}):Object(C.jsxs)("div",{className:"container",children:[Object(C.jsx)("h2",{className:"display-2 mt-5 mb-5",children:t.title}),t?this.renderPost(t):Object(C.jsxs)("div",{className:"jumbotron text-center",children:[Object(C.jsx)("h2",{children:"Loading..."})," "]}),Object(C.jsx)(be,{postId:t._id,comments:a.reverse(),updateComments:this.updateComments})]})}}]),n}(s.Component),ge=["Environmental","Social","Educational","Sport","Recreational","Music","Political","Festive"],xe=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).init=function(t){m(t).then((function(t){t.error?e.setState({redirectToProfile:!0}):(e.setState({id:t.postedBy._id,title:t.title,body:t.body,tags:t.tags,venue:t.venue,dateAndTime:t.dateAndTime,error:""}),console.log(e.state.tags))}))},e.handleChange=function(t){return function(n){var s,a="photo"===t?n.target.files[0]:n.target.value;if(void 0!==a){"photo"===t&&e.setState({defaultImage:!1,imagePath:URL.createObjectURL(n.target.files[0])});var c="photo"===t?n.target.files[0].size:0;e.postData.set(t,a),e.setState((s={},Object(U.a)(s,t,a),Object(U.a)(s,"fileSize",c),Object(U.a)(s,"error",""),s))}else e.setState({defaultImage:!0})}},e.isValid=function(){var t=e.state,n=t.title,s=t.body;return t.fileSize>2e5?(e.setState({error:"File size should be less 200KB"}),!1):0!==n.length&&0!==s.length||(e.setState({error:"Title and Body is required."}),!1)},e.clickSubmit=function(t){(t.preventDefault(),console.log(e.state.tags),e.isValid())&&(e.setState({loading:!0}),function(e,t,n){return fetch("".concat("http://35.154.206.235:8000","/post/").concat(e),{method:"PUT",headers:{Accept:"application/json",Authorization:"Bearer ".concat(t)},body:n}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))}(e.state.id,k().token,e.postData).then((function(t){t.error?e.setState({error:t.error}):e.setState({loading:!1,title:"",body:"",photo:"",redirectToProfile:!0})})))},e.tagChecked=function(t){return function(n){e.setState({tagCheck:!0,open:!1});var s=n.target.checked,a=ge.indexOf(t),c=e.state.tags;c[a]=s?1:0,e.setState({tags:c}),e.postData.set("tags",c)}},e.createCheckbox=function(t){return Object(C.jsxs)("label",{className:"btn btn-primary",children:[Object(C.jsx)("input",{type:"checkbox",className:"form-check-input",onChange:e.tagChecked(t),checked:!!e.state.tags[ge.indexOf(t)]}),t]},ge.indexOf(t))},e.createCheckboxes=function(){return ge.map(e.createCheckbox)},e.tagsForm=function(){return Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{className:"text-muted",children:"Event Tags"}),Object(C.jsx)("br",{}),Object(C.jsx)("div",{className:"button-group ml-5 mr-5",children:e.createCheckboxes()})]})},e.editPostForm=function(t,n,s,a,c){return Object(C.jsxs)("form",{children:[Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{className:"text-muted",children:"Image"}),Object(C.jsx)("input",{onChange:e.handleChange("photo"),type:"file",className:"form-control",accept:"image/*"})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{className:"text-muted",children:"Title"}),Object(C.jsx)("input",{onChange:e.handleChange("title"),type:"text",className:"form-control",value:n})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{className:"text-muted",children:"Body"}),Object(C.jsx)("textarea",{onChange:e.handleChange("body"),type:"text",className:"form-control",value:s})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{className:"text-muted",children:"Venue"}),Object(C.jsx)("input",{onChange:e.handleChange("venue"),type:"text",className:"form-control",value:a})]}),Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{className:"text-muted",children:"Date and Time"}),Object(C.jsx)("input",{onChange:e.handleChange("dateAndTime"),type:"text",className:"form-control",value:c})]}),e.tagsForm(),Object(C.jsxs)("div",{className:"d-inline-block",children:[Object(C.jsx)("button",{onClick:e.clickSubmit,className:"btn btn-raised btn-primary mr-5",children:"Update Event"}),Object(C.jsx)(o.b,{to:"/post/".concat(t),className:"btn btn-raised btn-danger",children:"Cancel"})]})]})},e.state={id:"",title:"",body:"",venue:"",dateAndTime:"",redirectToProfile:!1,error:"",fileSize:0,loading:!1,defaultImage:!0,imagePath:"",tags:[]},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){this.postData=new FormData;var e=this.props.match.params.postId;this.init(e)}},{key:"render",value:function(){var e=this.state,t=e.id,n=e.title,s=e.body,a=e.venue,c=e.dateAndTime,r=e.error,o=e.defaultImage,l=e.imagePath,d=e.redirectToProfile,u=e.loading;return d?Object(C.jsx)(i.a,{to:"/post/".concat(t)}):Object(C.jsxs)("div",{className:"container",children:[Object(C.jsx)("h2",{className:"mt-5 md-5",children:"Edit Event"}),Object(C.jsx)("div",{className:"alert alert-danger",style:{display:r?"":"none"},children:r}),u?Object(C.jsx)("div",{className:"jumbotron text-center",children:Object(C.jsx)("h2",{children:"Loading..."})}):"",o?Object(C.jsxs)("figure",{className:"figure",children:[Object(C.jsx)("img",{style:{height:"200px",width:"auto"},className:"figure-img img-fluid rounded",src:"".concat("http://35.154.206.235:8000","/post/photo/").concat(t),alt:n,onError:function(e){return e.target.src="".concat(N)}}),Object(C.jsx)("figcaption",{className:"figure-caption",children:"Existing Event Image"})]}):Object(C.jsxs)("figure",{className:"figure",children:[Object(C.jsx)("img",{style:{height:"200px",width:"auto"},className:"figure-img img-fluid rounded",src:l,alt:n}),Object(C.jsx)("figcaption",{className:"figure-caption",children:"Image to be uploaded"})]}),"admin"===k().user.role||k().user._id===t&&this.editPostForm(t,n,s,a,c)]})}}]),n}(s.Component),Oe=["Environmental","Social","Educational","Sport","Recreational","Music","Political","Festive"],ve=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(d.a)(this,n),(e=t.call(this)).generateTags=function(e){return e.map((function(e,t){return!(e>=.5)||Object(C.jsxs)("label",{className:"btn btn-raised btn-info col-md-12 mr-1",children:[" ",Oe[t]," "]},t)}))},e.tagsList=function(t){return Object(C.jsxs)("div",{className:"form-group",children:[Object(C.jsx)("label",{className:"text-muted",children:"Event Tags"}),Object(C.jsx)("br",{}),Object(C.jsx)("div",{className:"button-group ml-5 mr-5",children:e.generateTags(t)})]})},e.renderPosts=function(t){return Object(C.jsx)("div",{className:"row",children:t.map((function(t,n){var s=t.postedBy?"/user/".concat(t.postedBy._id):"",a=t.postedBy?t.postedBy.name:" Unknown";return Object(C.jsx)("div",{className:"card col-md-4",children:Object(C.jsxs)("div",{className:"card-body",children:[Object(C.jsx)("img",{src:"".concat("http://35.154.206.235:8000","/post/photo/").concat(t._id,"?").concat((new Date).getTime()),alt:t.title,onError:function(e){return e.target.src="".concat(N)},className:"img-thumbnail mb-3",style:{height:"200px",width:"100%"}}),Object(C.jsx)("h5",{className:"card-title",children:t.title}),Object(C.jsx)("p",{className:"card-text",children:t.body.substring(0,100)}),Object(C.jsx)("br",{}),Object(C.jsxs)("p",{className:"font-italic mark",children:["Posted By: ",Object(C.jsxs)(o.b,{to:"".concat(s),children:[a," "]}),"on ",new Date(t.created).toDateString()]}),e.tagsList(t.tags),Object(C.jsx)(o.b,{to:"/post/".concat(t._id),className:"btn btn-raised btn-primary btn-sm",children:"Expand"})]})},n)}))})},e.state={redirectToProfile:!1,posts:[],loading:!0,user:{}},e}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.userId;t!==k().user._id&&this.setState({redirectToProfile:!0});var n=k().token;(function(e,t){return console.log("getAttend"),fetch("".concat("http://35.154.206.235:8000","/user/attend/").concat(e),{method:"GET",headers:{Accept:"application/json","Content-Type":"application/json",Authorization:"Bearer ".concat(t)}}).then((function(e){return e.json()})).catch((function(e){return console.log(e)}))})(t,n).then((function(t){t.error?console.log(t.error):e.setState({posts:t,loading:!1})})),X(t,n).then((function(t){t.error?e.setState({redirectToSignin:!0}):e.setState({user:t})}))}},{key:"render",value:function(){var e=this.state,t=e.posts,n=e.loading,s=e.user;return e.redirectToProfile?Object(C.jsx)(i.a,{to:"/user/".concat(s.name)}):Object(C.jsxs)("div",{className:"container",children:[Object(C.jsxs)("h2",{className:"mt-5 mb-5",children:[" ",s.name,"'s Upcoming Events:"]}),n?Object(C.jsxs)("div",{className:"jumbotron text-center",children:[Object(C.jsx)("h2",{children:"Loading..."})," "]}):this.renderPosts(t)]})}}]),n}(s.Component),Ne=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){var e;Object(d.a)(this,n);for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];return(e=t.call.apply(t,[this].concat(a))).state={email:"",message:"",error:""},e.forgotPassword=function(t){t.preventDefault(),e.setState({message:"",error:""}),S(e.state.email).then((function(t){t.error?(console.log(t.error),e.setState({error:t.error})):(console.log(t.message),e.setState({message:t.message}))}))},e}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return Object(C.jsxs)("div",{className:"container",children:[Object(C.jsx)("h2",{className:"mt-5 mb-5",children:"Password Reset"}),this.state.message&&Object(C.jsx)("div",{className:"alert alert-success",children:this.state.message}),this.state.error&&Object(C.jsx)("div",{className:"alert alert-danger",children:this.state.error}),Object(C.jsxs)("form",{children:[Object(C.jsx)("div",{className:"form-group mt-5",children:Object(C.jsx)("input",{type:"email",className:"form-control",placeholder:"Enter your Email Address",value:this.state.email,name:"email",onChange:function(t){return e.setState({email:t.target.value,message:"",error:""})},autoFocus:!0})}),Object(C.jsxs)("p",{children:[Object(C.jsx)("button",{onClick:this.forgotPassword,className:"btn btn-raised btn-primary mr-3 mt-3",children:"Send Password Reset Link"}),Object(C.jsxs)(o.b,{to:"/signin",className:"btn btn-raised btn-success mt-3",children:[" ","Back To Signin"]})]})]})]})}}]),n}(s.Component),ye=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(e){var s;return Object(d.a)(this,n),(s=t.call(this,e)).resetPassword=function(e){e.preventDefault(),s.setState({message:"",error:""});var t,n=s.state.newPassword;if(s.state.rePassword!==n)return s.setState({error:"Entered Passwords do not match"}),!1;(t={newPassword:s.state.newPassword,resetPasswordLink:s.props.match.params.resetPasswordToken},fetch("".concat("http://35.154.206.235:8000","/reset-password/"),{method:"PUT",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return console.log("forgot password response: ",e),e.json()})).catch((function(e){return console.log(e)}))).then((function(e){e.error?(console.log(e.error),s.setState({error:e.error})):(console.log(e.message),s.setState({message:e.message,newPassword:""}))}))},s.state={newPassword:"",rePassword:"",message:"",error:""},s}return Object(u.a)(n,[{key:"render",value:function(){var e=this;return Object(C.jsxs)("div",{className:"container",children:[Object(C.jsx)("h2",{className:"mt-5 mb-5",children:"Reset Your Password"}),this.state.message&&Object(C.jsx)("div",{className:"alert alert-success",children:this.state.message}),this.state.error&&Object(C.jsx)("div",{className:"alert alert-danger",children:this.state.error}),Object(C.jsxs)("form",{children:[Object(C.jsxs)("div",{className:"form-group mt-5",children:[Object(C.jsx)("input",{type:"password",className:"form-control mb-5",placeholder:"Your new password",value:this.state.newPassword,name:"newPassword",onChange:function(t){return e.setState({newPassword:t.target.value,message:"",error:""})},autoFocus:!0}),Object(C.jsx)("input",{type:"password",className:"form-control",placeholder:"Re-Enter new password",value:this.state.rePassword,name:"rePassword",onChange:function(t){return e.setState({rePassword:t.target.value,message:"",error:""})}})]}),Object(C.jsxs)("p",{children:[Object(C.jsx)("button",{onClick:this.resetPassword,className:"btn btn-raised btn-primary mt-3 mr-3",children:"Reset Password"}),Object(C.jsxs)(o.b,{to:"/signin",className:"btn btn-raised btn-success mt-3",children:[" ","Back To Signin"]})]})]})]})}}]),n}(s.Component),we=function(e){Object(j.a)(n,e);var t=Object(h.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return Object(C.jsx)("div",{className:"jumbotron",children:Object(C.jsx)("center",{children:Object(C.jsx)("h2",{className:"lead",children:"Account No Longer Exists..."})})})}}]),n}(s.Component),ke=function(){var e=Object(l.useMediaQuery)({query:"(min-device-width: 700px)"});return Object(C.jsxs)("div",{style:{fontFamily:"-moz-initial",backgroundColor:"#dce1e3",height:"100%"},children:[e&&Object(C.jsx)(_,{}),!e&&Object(C.jsx)(D,{}),Object(C.jsxs)(i.d,{children:[Object(C.jsx)(i.b,{exact:!0,path:"/",component:z}),Object(C.jsx)(i.b,{exact:!0,path:"/forgot-password",component:Ne}),Object(C.jsx)(i.b,{exact:!0,path:"/reset-password/:resetPasswordToken",component:ye}),Object(C.jsx)(i.b,{exact:!0,path:"/users",component:oe}),Object(C.jsx)(i.b,{exact:!0,path:"/signup",component:J}),Object(C.jsx)(i.b,{exact:!0,path:"/signin",component:ee}),Object(C.jsx)(ue,{exact:!0,path:"/user",component:we}),Object(C.jsx)(ue,{exact:!0,path:"/user/:userId",component:re}),Object(C.jsx)(ue,{exact:!0,path:"/user/edit/:userId",component:ie}),Object(C.jsx)(ue,{exact:!0,path:"/user/findpeople/:userId",component:je}),Object(C.jsx)(ue,{exact:!0,path:"/user/post/new/:userId",component:me}),Object(C.jsx)(ue,{exact:!0,path:"/post/:postId",component:fe}),Object(C.jsx)(ue,{exact:!0,path:"/post/edit/:postId",component:xe}),Object(C.jsx)(ue,{exact:!0,path:"/user/Attending/:userId",component:ve})]})]})},Se=function(){return Object(C.jsx)(o.a,{children:Object(C.jsx)(ke,{})})};r.a.render(Object(C.jsx)(a.a.StrictMode,{children:Object(C.jsx)(Se,{})}),document.getElementById("root"))}},[[36,1,2]]]);
//# sourceMappingURL=main.3d0a6735.chunk.js.map